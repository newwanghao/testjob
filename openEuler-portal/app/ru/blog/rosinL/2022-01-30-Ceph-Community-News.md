---
title: Новости сообщества Ceph (в период с 13.12.2021 по 16.01.2022)  
category: blog 
date: 2022.01.30  
tags:  
    - Ceph  
    - Новости  
    - Pacific  
sig: ceph-sig  
archives: 2022.01  
author: rosinL  
summary: новости сообщества Ceph
---

# Новости сообщества Ceph (в период с 13.12.2021 по 16.01.2022)

## Планирование выпуска версии Quincy, функции в которую уже не добавляются, в марте 2022 г.

Новые функции в версию Quincy не добавляются с 15 января 2022 года, и в настоящее время она находится в стадии тестирования. Помимо стандартных тестов, в настоящий момент проводятся более масштабные тесты. В таких тестах задействуются более 1000 OSD.

## Слияние PR

- common: оптимизирован PriorityCache. Ресурсы кэш-памяти распределяются по времени, реализована более точная установка приоритетов. Однако тесты на производительность показывают незначительное увеличение. [pr#43299](https://github.com/ceph/ceph/pull/43299)
- bluestore: оптимизирован процесс записи. Поток bufferlist проверяется на наличие нулей. Найденные нули пропускаются во время записи. Для отслеживания данного процесса используется новый счетчик. [pr#43337](https://github.com/ceph/ceph/pull/43337)
- bluestore: уменьшен объем ресурсов памяти, необходимых для fsck во время запуска. [pr#43667](https://github.com/ceph/ceph/pull/43667)
- bluestore: оптимизирована блокировка BlueFS с повышением детализации. [pr#43794](https://github.com/ceph/ceph/pull/43794)
- bluestore: используется буфер чтения с выделением огромных страниц памяти, который по умолчанию отключен. [pr#43691](https://github.com/ceph/ceph/pull/43691)
- mon: при создании пула добавляется флаг --bulk, в результате компонент pg autoscaler регулирует исходное число PG пула, вплоть до увеличения его до максимального значения. По умолчанию pg autoscaler настраивает минимальное значение количества PG пула и далее динамически изменяет это значение. [pr#44241](https://github.com/ceph/ceph/pull/44241)
- mgr: добавлены команды для глобального включения и отключения pg\_autoscaler. [pr#43716](https://github.com/ceph/ceph/pull/43716)
- mgr: реализована кэш-память TTL, которая хранит информацию о кластере и уменьшает операции по взаимодействию с кластером. [pr#44088](https://github.com/ceph/ceph/pull/44088)
- mgr: оптимизирован балансировщик и реорганизована структура calc\_pg\_upmaps ([pr#44002](https://github.com/ceph/ceph/pull/44002)). Балансировщик будет реализован в версии Quincy для балансировки емкости и нагрузки.
- cephdeduptool: добавлены команды chunk (offset и length) и object dedupe, которые облегчают использование функции дедупликации. [pr#43686](https://github.com/ceph/ceph/pull/43686)
- rgw/s3select: добавлены arrow/parquet ([pr#40802](https://github.com/ceph/ceph/pull/40802)). Из-за проблемы, связанной с зависимостями, данная функция во время компиляции по умолчанию отключена. [pr#44603](https://github.com/ceph/ceph/pull/44603)
- rgw: добавлены ограничения скорости по пользователю/сегменту памяти. [pr#42891](https://github.com/ceph/ceph/pull/42891)
- rgw: уменьшена ненужная нагрузка, связанная со статистикой сегмента памяти.  [pr#44538](https://github.com/ceph/ceph/pull/44538)
- rgw: добавлена опция max\_header\_size, которая регулирует размер буфера синтаксического анализа фронтенда beast. По умолчанию устанавливается размер 16 КБ, максимальный размер — 64 КБ. Буфер большего размера позволяет уменьшить число операций чтения из сокета ([pr#44029](https://github.com/ceph/ceph/pull/44029)). В [pr#29776](https://github.com/ceph/ceph/pull/29776) размер увеличен до статической величины 64 КБ, что повысило гибкость.

## Свежие новости от разработчиков Ceph

Каждый модуль сообщества Ceph проводит регулярные совещания, на которых обсуждаются и решаются вопросы, связанные с текущим прогрессом разработки. Видео совещаний выгружаются на [YouTube](https://www.youtube.com/channel/UCno-Fry25FJ7B4RycCxOtfw/videos). Наиболее важные совещания: 

| Совещание                                                    | Описание                            | Частота           |
| ------------------------------------------------------------ | ----------------------------------- | ----------------- |
| Еженедельное совещание по вопросам Crimson SeaStore OSD      | Разработка Crimson и SeaStore       | Еженедельно       |
| Совещание по вопросам оркестрации Ceph                       | Управляющий модуль Ceph (mgr)       | Еженедельно       |
| Совещание по вопросам Ceph DocUBetter                        | Оптимизация документов              | Каждые две недели |
| Совещание по вопросам производительности Ceph                | Оптимизация производительности Ceph | Каждые две недели |
| Ежемесячное совещание разработчиков Ceph                     | Разработчики Ceph                   | Ежемесячно        |
| Совещание по вопросам тестирования Ceph                      | Верификация и выпуск версий         | Ежемесячно        |
| Совещание группы пользователей Ceph, ведущих научную деятельность | Научные вычисления Ceph             | Нерегулярно       |
| Совещание руководящей группы Ceph                            | Руководящий состав Ceph             | Еженедельно       |

В последнее время большое внимание уделяется вопросам производительности. На совещаниях обсуждаются следующие темы:

- Необходимость сравнения теста на производительность версии Quincy с тестом версии Pacific. Тест на производительность NVMe основан на MAKO (AMD EPYC 7742) и 120 OSD. Тестируются отдельные узлы или множество узлов (копированием и EC). Инструменты тестирования: fio(rbd cephfs), hsbench (rgw), tcmu-runner (iscsi/nbd), omapbench(mds).
- В версию Quincy можно добавить тест на восстановление.
- Согласно тесту версии Pacific, perf cycles/op monitoring уменьшает производительность максимум на 15%.
- Информация о занятой памяти Ceph не является прозрачной в связи с невозможностью отследить состояние памяти множества модулей. Поэтому может потребоваться дальнейшая оптимизация памяти.